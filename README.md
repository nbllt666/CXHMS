# CXHMS (æ™¨æ›¦äººæ ¼åŒ–è®°å¿†ç³»ç»Ÿ)

CXHMS (CX-O History & Memory Service) æ˜¯ä¸€ä¸ªæ™ºèƒ½è®°å¿†ç®¡ç†å¹³å°ï¼Œæä¾›å®Œæ•´çš„é•¿æœŸè®°å¿†å­˜å‚¨ã€è¯­ä¹‰æœç´¢ã€è‡ªåŠ¨å½’æ¡£ã€å¤šæ¨¡å‹å¯¹è¯ã€ACPåè®®é€šä¿¡å’Œå·¥å…·è°ƒç”¨åŠŸèƒ½ã€‚

## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| **é¡¹ç›®åç§°** | CXHMS (æ™¨æ›¦äººæ ¼åŒ–è®°å¿†ç³»ç»Ÿ) |
| **ç‰ˆæœ¬** | v1.0.0 |
| **æ¶æ„** | å‰åç«¯åˆ†ç¦» (B/S æ¶æ„) |
| **è®¸å¯è¯** | MIT License |

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ§  æ™ºèƒ½è®°å¿†ç³»ç»Ÿ
- **å¤šå‘é‡å­˜å‚¨åç«¯**: æ”¯æŒ Weaviateã€Milvus Liteã€Qdrantã€Ollama Embeddings
- **é«˜çº§å½’æ¡£åŠŸèƒ½**: æ™ºèƒ½å»é‡ã€è‡ªåŠ¨åˆå¹¶ã€å±‚çº§å½’æ¡£ï¼ˆ4çº§å‹ç¼©ï¼‰
- **è®°å¿†è¡°å‡æ¨¡å‹**: è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿ + åŒé˜¶æ®µæŒ‡æ•°è¡°å‡
- **ä¸‰ç»´è¯„åˆ†ç³»ç»Ÿ**: é‡è¦æ€§ Ã— æ—¶é—´è¡°å‡ Ã— ç›¸å…³æ€§
- **æƒ…æ„Ÿåˆ†æ**: è‡ªåŠ¨æ ‡è®°è®°å¿†æƒ…æ„Ÿå€¾å‘

### ğŸ¤– ACP åè®®æ”¯æŒ
- **å±€åŸŸç½‘è‡ªåŠ¨å‘ç°**: UDP å¹¿æ’­å‘ç°åŒç½‘ç»œ Agent
- **ç‚¹å¯¹ç‚¹é€šä¿¡**: ç›´æ¥æ¶ˆæ¯ä¼ é€’
- **ç¾¤ç»„ååŒ**: å¤š Agent ååŒå·¥ä½œ
- **è·¨ Agent è®°å¿†å…±äº«**: åˆ†å¸ƒå¼è®°å¿†è®¿é—®

### ğŸ› ï¸ å·¥å…·ç”Ÿæ€ç³»ç»Ÿ
- **MCP åè®®**: Model Context Protocol å®Œæ•´æ”¯æŒ
- **å†…ç½®å·¥å…·**: è®¡ç®—å™¨ã€æ—¥æœŸæ—¶é—´ã€è®°å¿†æœç´¢ç­‰
- **åŠ¨æ€æ³¨å†Œ**: è‡ªå®šä¹‰å·¥å…·çƒ­æ³¨å†Œ
- **å·¥å…·è°ƒç”¨**: OpenAI Functions å…¼å®¹æ ¼å¼

### ğŸ’¬ å¯¹è¯ç³»ç»Ÿ
- **æµå¼å“åº”**: Server-Sent Events (SSE) å®æ—¶è¾“å‡º
- **è®°å¿†å¢å¼º**: RAG æ£€ç´¢å¢å¼ºç”Ÿæˆ
- **ä¸Šä¸‹æ–‡ç®¡ç†**: ä¼šè¯å†å²ã€Mono ä¸Šä¸‹æ–‡æŒä¹…åŒ–
- **å¤š Agent**: é»˜è®¤åŠ©æ‰‹ã€åˆ›æ„åŠ©æ‰‹ã€ä»»åŠ¡åŠ©æ‰‹

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CXHMS æœåŠ¡å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   API    â”‚  â”‚  WebUI   â”‚  â”‚  Memory  â”‚  â”‚  Tools   â”‚        â”‚
â”‚  â”‚  Layer   â”‚  â”‚  Layer   â”‚  â”‚  Layer   â”‚  â”‚  Layer   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â”‚
â”‚       â”‚             â”‚             â”‚             â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚              Core Services Layer                   â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚  â”‚  â”‚ Memory  â”‚ â”‚ Context â”‚ â”‚  Tools  â”‚ â”‚   ACP   â”‚  â”‚        â”‚
â”‚  â”‚  â”‚ Manager â”‚ â”‚ Manager â”‚ â”‚Registry â”‚ â”‚ Manager â”‚  â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚          â”‚           â”‚           â”‚           â”‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚              Storage Layer                         â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚        â”‚
â”‚  â”‚  â”‚ SQLite  â”‚ â”‚  Redis  â”‚ â”‚ Milvus  â”‚ â”‚ Qdrant  â”‚  â”‚        â”‚
â”‚  â”‚  â”‚ (Local) â”‚ â”‚ (Cache) â”‚ â”‚  (Lite) â”‚ â”‚(Server) â”‚  â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

| ä¾èµ– | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **Python** | 3.10+ | åç«¯è¿è¡Œç¯å¢ƒ |
| **Node.js** | 18+ | å‰ç«¯æ„å»ºç¯å¢ƒ |
| **Ollama** | latest | æœ¬åœ° LLM (æ¨è) |
| **å‘é‡æ•°æ®åº“** | å¯é€‰ | Milvus Lite / Qdrant / Weaviate |

### 1. å®‰è£…åç«¯ä¾èµ–

```bash
# åˆ›å»º conda ç¯å¢ƒ (æ¨è)
conda create -n cxhms python=3.10
conda activate cxhms

# å®‰è£… Python ä¾èµ–
pip install -r requirements.txt

# å®‰è£… Ollama (å¦‚éœ€æœ¬åœ° LLM)
# Windows: https://ollama.com/download
# macOS: brew install ollama
```

### 2. å¯åŠ¨åç«¯æœåŠ¡

```bash
# æ–¹å¼ä¸€: ä½¿ç”¨ conda ç¯å¢ƒ
.\2.å¯åŠ¨åç«¯(Condaç¯å¢ƒ).bat

# æ–¹å¼äºŒ: ä½¿ç”¨ç³»ç»Ÿ Python
.\3.å¯åŠ¨åç«¯(ç³»ç»Ÿç¯å¢ƒ).bat

# æ–¹å¼ä¸‰: æ‰‹åŠ¨å¯åŠ¨
python main.py
```

æœåŠ¡å¯åŠ¨åï¼š
- **API æ–‡æ¡£**: http://localhost:8000/docs
- **Gradio WebUI**: http://localhost:7860
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health

### 3. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯å°†åœ¨ http://localhost:3000 å¯åŠ¨

### 4. ä¸€é”®å¯åŠ¨ (Windows)

```bash
# ä½¿ç”¨ conda ç¯å¢ƒå¯åŠ¨å‰ç«¯å’Œæ§åˆ¶æœåŠ¡
.\1.1.å¯åŠ¨å‰ç«¯(å«æ§åˆ¶æœåŠ¡)(Conda).bat

# ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒå¯åŠ¨å‰ç«¯å’Œæ§åˆ¶æœåŠ¡
.\1.2.å¯åŠ¨å‰ç«¯(å«æ§åˆ¶æœåŠ¡)(ç³»ç»Ÿ).bat
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
CXHMS/
â”œâ”€â”€ backend/                    # Python åç«¯
â”‚   â”œâ”€â”€ api/                    # FastAPI è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ routers/           # API ç«¯ç‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ acp.py        # ACP åè®®
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.py      # ç®¡ç†å‘˜åŠŸèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ agents.py     # Agent ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ archive.py    # å½’æ¡£ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.py       # èŠå¤©å¯¹è¯
â”‚   â”‚   â”‚   â”œâ”€â”€ context.py    # ä¸Šä¸‹æ–‡ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ memory.py     # è®°å¿†ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ memory_chat.py # è®°å¿†å¯¹è¯
â”‚   â”‚   â”‚   â”œâ”€â”€ service.py    # æœåŠ¡çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ tools.py      # å·¥å…·ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ websocket.py   # WebSocket
â”‚   â”‚   â””â”€â”€ app.py             # FastAPI åº”ç”¨
â”‚   â”œâ”€â”€ core/                  # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ acp/              # ACP åè®®å®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ discover.py   # Agent å‘ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ group.py       # Agent ç»„
â”‚   â”‚   â”‚   â””â”€â”€ manager.py     # ACP ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ context/          # ä¸Šä¸‹æ–‡ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py    # ä¸Šä¸‹æ–‡ç®¡ç†å™¨
â”‚   â”‚   â”‚   â””â”€â”€ summarizer.py  # æ‘˜è¦ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ llm/              # LLM å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â”œâ”€â”€ client.py     # é€šç”¨å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â””â”€â”€ tools.py       # LLM å·¥å…·
â”‚   â”‚   â”œâ”€â”€ memory/           # è®°å¿†ç®¡ç†æ ¸å¿ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ archiver.py   # å½’æ¡£å¤„ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ conversation.py # å¯¹è¯è®°å¿†
â”‚   â”‚   â”‚   â”œâ”€â”€ decay.py       # è®°å¿†è¡°å‡
â”‚   â”‚   â”‚   â”œâ”€â”€ decay_batch.py # æ‰¹é‡è¡°å‡
â”‚   â”‚   â”‚   â”œâ”€â”€ deduplication.py # å»é‡
â”‚   â”‚   â”‚   â”œâ”€â”€ embedding.py   # åµŒå…¥ç”Ÿæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ emotion.py     # æƒ…æ„Ÿåˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ hybrid_search.py # æ··åˆæœç´¢
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py     # è®°å¿†ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ router.py      # è·¯ç”±ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ secondary_router.py # å‰¯è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ vector_store.py # å‘é‡å­˜å‚¨
â”‚   â”‚   â”‚   â”œâ”€â”€ milvus_lite_store.py
â”‚   â”‚   â”‚   â””â”€â”€ weaviate_store.py
â”‚   â”‚   â”œâ”€â”€ plugins/          # æ’ä»¶ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ session/          # ä¼šè¯ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ cleanup.py    # æ¸…ç†ä»»åŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ models.py     # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ store.py      # å­˜å‚¨å®ç°
â”‚   â”‚   â”œâ”€â”€ tools/           # å·¥å…·ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ assistant_tools.py
â”‚   â”‚   â”‚   â”œâ”€â”€ builtin.py    # å†…ç½®å·¥å…·
â”‚   â”‚   â”‚   â”œâ”€â”€ master_tools.py
â”‚   â”‚   â”‚   â”œâ”€â”€ mcp.py        # MCP åè®®
â”‚   â”‚   â”‚   â”œâ”€â”€ memory_tools.py
â”‚   â”‚   â”‚   â”œâ”€â”€ registry.py   # å·¥å…·æ³¨å†Œè¡¨
â”‚   â”‚   â”‚   â””â”€â”€ summary_tools.py
â”‚   â”‚   â”œâ”€â”€ websocket/        # WebSocket
â”‚   â”‚   â”‚   â”œâ”€â”€ handlers.py   # æ¶ˆæ¯å¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ manager.py    # è¿æ¥ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ exceptions.py     # å¼‚å¸¸å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ logging_config.py # æ—¥å¿—é…ç½®
â”‚   â”‚   â””â”€â”€ model_router.py   # æ¨¡å‹è·¯ç”±
â”‚   â”œâ”€â”€ models/               # Pydantic æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ acp.py           # ACP æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ context.py       # ä¸Šä¸‹æ–‡æ¨¡å‹
â”‚   â”‚   â””â”€â”€ memory.py         # è®°å¿†æ¨¡å‹
â”‚   â”œâ”€â”€ storage/              # æ•°æ®å­˜å‚¨å±‚
â”‚   â”‚   â””â”€â”€ database/         # æ•°æ®åº“ç®¡ç†
â”‚   â”œâ”€â”€ tests/                # åç«¯æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_api/        # API æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_core/        # å•å…ƒæµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_integration/ # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ control_service.py    # æ§åˆ¶æœåŠ¡
â”‚   â””â”€â”€ scripts/              # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ frontend/                  # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/             # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ components/       # React ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LanguageSwitcher.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ i18n/           # å›½é™…åŒ–
â”‚   â”‚   â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AcpPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AgentsPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ArchivePage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoriesPage.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsPage.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ToolsPage.tsx
â”‚   â”‚   â”œâ”€â”€ store/           # Zustand çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts        # Vite é…ç½®
â”‚   â”œâ”€â”€ tailwind.config.js   # Tailwind é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”‚   â””â”€â”€ vitest.config.ts      # Vitest é…ç½®
â”œâ”€â”€ config/                    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ default.yaml         # é»˜è®¤é…ç½®
â”‚   â””â”€â”€ settings.py           # é…ç½®åŠ è½½å™¨
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”‚   â”œâ”€â”€ API.md               # API æ–‡æ¡£
â”‚   â”œâ”€â”€ ARCHITECTURE.md      # æ¶æ„æ–‡æ¡£
â”‚   â””â”€â”€ DEPLOYMENT.md        # éƒ¨ç½²æ–‡æ¡£
â”œâ”€â”€ webui/                     # Gradio WebUI
â”œâ”€â”€ plugins/                   # æ’ä»¶ç›®å½•
â”œâ”€â”€ data/                      # æ•°æ®å­˜å‚¨
â”œâ”€â”€ logs/                      # æ—¥å¿—ç›®å½•
â”œâ”€â”€ main.py                    # ä¸»å…¥å£
â”œâ”€â”€ run_tests.py              # æµ‹è¯•è¿è¡Œå™¨
â”œâ”€â”€ pytest.ini                # pytest é…ç½®
â”œâ”€â”€ Dockerfile                # Docker é•œåƒ
â”œâ”€â”€ docker-compose.yml        # Docker Compose
â””â”€â”€ requirements.txt          # Python ä¾èµ–
```

## âš™ï¸ é…ç½®è¯´æ˜

### é»˜è®¤é…ç½®

ç¼–è¾‘ `config/default.yaml` é…ç½®æ–‡ä»¶ï¼š

```yaml
server:
  host: "0.0.0.0"
  port: 8000

# LLM æ¨¡å‹é…ç½®
models:
  main:
    provider: "ollama"
    host: "http://localhost:11434"
    model: "qwen3vl:8b"
    enabled: true
  summary:
    provider: "ollama"
    model: "llama3.2:3b"
    enabled: false

# å‘é‡å­˜å‚¨åç«¯é…ç½®
memory:
  vector_backend: "milvus_lite"  # milvus_lite, qdrant, weaviate
  hybrid_search_enabled: false
  archive_enabled: true
  
  # è®°å¿†è¡°å‡æ¨¡å‹
  # exponential - åŒé˜¶æ®µæŒ‡æ•°è¡°å‡ï¼ˆé»˜è®¤ï¼‰
  # ebbinghaus  - è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿
  decay_model: exponential
  
  # è‰¾å®¾æµ©æ–¯æ¨¡å‹å‚æ•°
  ebbinghaus_params:
    t50: 30.0      # åŠè¡°æœŸï¼ˆå¤©ï¼‰
    k: 2.0         # æ›²çº¿é™¡å³­åº¦

# ACP åè®®é…ç½®
acp:
  enabled: true
  discovery_enabled: true
  discovery_port: 9999
```

### å¿…éœ€æœåŠ¡

1. **Ollama** (æœ¬åœ° LLM)
   ```bash
   ollama serve
   ollama pull qwen3vl:8b    # ä¸»æ¨¡å‹
   ollama pull llama3.2:3b   # è¾…åŠ©æ¨¡å‹
   ```

2. **å‘é‡æ•°æ®åº“** (æ ¹æ®é…ç½®é€‰æ‹©)
   - **Milvus Lite** (é»˜è®¤): è‡ªåŠ¨åˆ›å»ºæœ¬åœ°æ•°æ®åº“
   - **Qdrant**: `docker run -p 6333:6333 qdrant/qdrant`
   - **Weaviate**: `docker run -p 8080:8080 semitechnologies/weaviate`

## ğŸ“¡ API æ–‡æ¡£

å¯åŠ¨æœåŠ¡åè®¿é—® http://localhost:8000/docs æŸ¥çœ‹å®Œæ•´çš„ Swagger API æ–‡æ¡£ã€‚

### ä¸»è¦ API ç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/health` | GET | å¥åº·æ£€æŸ¥ |
| `/api/chat` | POST | èŠå¤©å¯¹è¯ |
| `/api/chat/stream` | POST | æµå¼èŠå¤© |
| `/api/memories` | GET/POST | è®°å¿†ç®¡ç† |
| `/api/memories/search` | POST | è¯­ä¹‰æœç´¢ |
| `/api/memories/search-3d` | POST | ä¸‰ç»´è¯„åˆ†æœç´¢ |
| `/api/sessions` | GET/POST | ä¼šè¯ç®¡ç† |
| `/api/archive` | GET/POST | å½’æ¡£ç®¡ç† |
| `/api/agents` | GET/POST | Agent ç®¡ç† |
| `/api/tools` | GET | å·¥å…·åˆ—è¡¨ |
| `/api/tools/mcp/*` | * | MCP æœåŠ¡å™¨ç®¡ç† |
| `/api/context/*` | * | ä¸Šä¸‹æ–‡ç®¡ç† |
| `/api/acp/*` | * | ACP åè®® |
| `/api/admin/*` | * | ç®¡ç†å‘˜åŠŸèƒ½ |

## ğŸ§ª æµ‹è¯•

### å‰ç«¯æµ‹è¯•

```bash
cd frontend

# è¿è¡Œæµ‹è¯•
npm test

# ç›‘è§†æ¨¡å¼
npm run test:watch

# ç±»å‹æ£€æŸ¥
npm run typecheck

# ä»£ç æ£€æŸ¥
npm run lint

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### åç«¯æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest backend/tests -v

# è¿è¡Œç‰¹å®šæ¨¡å—
python -m pytest backend/tests/test_api -v
python -m pytest backend/tests/test_core -v

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
python -m pytest backend/tests --cov=backend --cov-report=html
```

### ç»Ÿä¸€æµ‹è¯•è¿è¡Œå™¨

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python run_tests.py

# åªè¿è¡Œå‰ç«¯æµ‹è¯•
python run_tests.py --frontend-only

# åªè¿è¡Œåç«¯æµ‹è¯•
python run_tests.py --backend-only

# å¸¦è¦†ç›–ç‡æŠ¥å‘Š
python run_tests.py --coverage
```

**æµ‹è¯•è¦†ç›–**: 30+ æµ‹è¯•ç”¨ä¾‹è¦†ç›–æ‰€æœ‰ä¸»è¦åŠŸèƒ½æ¨¡å—

## ğŸ³ Docker éƒ¨ç½²

### ä½¿ç”¨ Docker Compose

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f cxhms

# åœæ­¢æœåŠ¡
docker-compose down
```

### æ‰‹åŠ¨æ„å»º

```bash
# æ„å»ºé•œåƒ
docker build -t cxhms:latest .

# è¿è¡Œå®¹å™¨
docker run -d -p 8000:8000 -p 7860:7860 \
  -v ./data:/app/data \
  -v ./config:/app/config \
  --name cxhms \
  cxhms:latest
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | 18.3.1 | UI æ¡†æ¶ |
| TypeScript | 5.7.2 | ç±»å‹å®‰å…¨ |
| Vite | 6.0.6 | æ„å»ºå·¥å…· |
| Tailwind CSS | 3.4.17 | æ ·å¼æ¡†æ¶ |
| Zustand | 5.0.2 | çŠ¶æ€ç®¡ç† |
| React Query | 5.62.11 | æ•°æ®è·å– |
| Framer Motion | 11.15.0 | åŠ¨ç”»åº“ |
| Recharts | 2.15.0 | å›¾è¡¨åº“ |
| Lucide React | 0.469.0 | å›¾æ ‡åº“ |
| Vitest | 2.1.8 | æµ‹è¯•æ¡†æ¶ |

### åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| FastAPI | 0.104.1+ | Web æ¡†æ¶ |
| Pydantic | 2.5.0+ | æ•°æ®éªŒè¯ |
| SQLAlchemy | - | ORM |
| Milvus Lite | 2.3.3+ | å‘é‡å­˜å‚¨ |
| Qdrant Client | 1.6.9+ | å‘é‡å­˜å‚¨ |
| Weaviate Client | 4.0.0+ | å‘é‡å­˜å‚¨ |
| OpenAI SDK | 1.3.6+ | LLM é›†æˆ |
| Anthropic | 0.7.8+ | LLM é›†æˆ |
| Gradio | 4.7.1+ | WebUI |
| Pytest | - | æµ‹è¯•æ¡†æ¶ |

## ğŸ“– æ–‡æ¡£èµ„æº

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [README.md](README.md) | é¡¹ç›®ä¸»æ–‡æ¡£ |
| [docs/API.md](docs/API.md) | å®Œæ•´ API æ–‡æ¡£ |
| [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md) | æ¶æ„è®¾è®¡æ–‡æ¡£ |
| [docs/DEPLOYMENT.md](docs/DEPLOYMENT.md) | éƒ¨ç½²æŒ‡å— |
| [PROJECT_REPORT.md](PROJECT_REPORT.md) | é¡¹ç›®å®Œæ•´æŠ¥å‘Š |
| [TESTING.md](TESTING.md) | æµ‹è¯•æ–‡æ¡£ |

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-02-08)

- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ§  å®Œæ•´è®°å¿†ç®¡ç†ç³»ç»Ÿ
- ğŸ¤– ACP åè®®å®ç°
- ğŸ› ï¸ MCP å·¥å…·åè®®æ”¯æŒ
- ğŸ’¬ æµå¼å¯¹è¯ç³»ç»Ÿ
- ğŸ¨ ç°ä»£åŒ–å‰ç«¯ç•Œé¢
- ğŸ§ª å®Œæ•´çš„æµ‹è¯•å¥—ä»¶
- ğŸ“¦ Docker éƒ¨ç½²æ”¯æŒ

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

**CXHMS** - è®© AI æ‹¥æœ‰æŒä¹…è®°å¿†çš„èƒ½åŠ›
