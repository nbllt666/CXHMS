# CXHMS - CX-O History & Memory Service è¯¦ç»†å®æ–½è®¡åˆ’

## é¡¹ç›®æ¦‚è¿°

**CXHMS** æ˜¯ä¸€ä¸ªç±»ä¼¼AnythingLLMçš„AIä»£ç†ä¸­é—´å±‚æœåŠ¡ï¼Œæä¾›ï¼š
- ğŸ§  RAGå¢å¼ºçš„é•¿æœŸè®°å¿†ç³»ç»Ÿ
- ğŸ”§ å·¥å…·è°ƒç”¨ç³»ç»Ÿ (OpenAI Functionså…¼å®¹)
- ğŸ”— ACP Connect 2.0 (å±€åŸŸç½‘å‘ç° + ç¾¤ç»„é€šè®¯)
- ğŸ“Š å¼ºå¤§çš„ç®¡ç†API
- ğŸ–¥ï¸ Gradio WebUIç®¡ç†ç•Œé¢
- âš¡ é«˜æ€§èƒ½å¼‚æ­¥æ¶æ„

---

## ç›®å½•ç»“æ„ (å®Œæ•´ç‰ˆ)

```
CXHMS/
â”‚
â”œâ”€â”€ backend/                                  # åç«¯æœåŠ¡ (Python)
â”‚   â”‚
â”‚   â”œâ”€â”€ main.py                               # [NEW] æœåŠ¡å…¥å£
â”‚   â”‚   â”œâ”€â”€ åˆ›å»ºFastAPIåº”ç”¨
â”‚   â”‚   â”œâ”€â”€ åˆå§‹åŒ–æ‰€æœ‰æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ å¯åŠ¨WebSocket
â”‚   â”‚   â””â”€â”€ å¯åŠ¨åå°ä»»åŠ¡
â”‚   â”‚
â”‚   â”œâ”€â”€ config.py                             # [NEW] é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ CXHMSSettings (é…ç½®ç±»)
â”‚   â”‚   â”œâ”€â”€ load_config()                     # åŠ è½½é…ç½®
â”‚   â”‚   â”œâ”€â”€ save_config()                     # ä¿å­˜é…ç½®
â”‚   â”‚   â””â”€â”€ get_env_config()                  # ç¯å¢ƒå˜é‡
â”‚   â”‚
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ app.py                            # [NEW] FastAPIåº”ç”¨
â”‚   â”‚   â”‚   â”œâ”€â”€ create_app()                  # åˆ›å»ºåº”ç”¨
â”‚   â”‚   â”‚   â”œâ”€â”€ setup_middleware()            # ä¸­é—´ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ setup_routers()               # è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ setup_websocket()             # WebSocket
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.py                       # [NEW] èŠå¤©æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /chat                # å‘é€æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /chat/stream         # æµå¼èŠå¤©
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WebSocket /ws/chat        # WebSocketèŠå¤©
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GET /chat/history         # è·å–å†å²
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ memory.py                     # [FROM core/memory]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/memories         # åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/memories        # åˆ›å»º
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/memories/{id}    # è·å–
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PUT /api/memories/{id}    # æ›´æ–°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DELETE /api/memories/{id} # åˆ é™¤
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/memories/search # æœç´¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/memories/rag    # RAGæ£€ç´¢
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GET /api/memories/stats   # ç»Ÿè®¡
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ context.py                    # [NEW] ä¸Šä¸‹æ–‡æ¥å£
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/context/sessions         # ä¼šè¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/context/sessions        # åˆ›å»ºä¼šè¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/context/sessions/{id}    # è·å–ä¼šè¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DELETE /api/context/sessions/{id} # åˆ é™¤ä¼šè¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/context/messages         # æ¶ˆæ¯å†å²
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/context/summary         # ç”Ÿæˆæ‘˜è¦
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GET /api/context/window           # çª—å£ä¼˜åŒ–
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ tools.py                      # [FROM core/tool_registry]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/tools            # å·¥å…·åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/tools           # æ³¨å†Œå·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/tools/{name}     # å·¥å…·è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DELETE /api/tools/{name}  # åˆ é™¤å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/tools/call      # è°ƒç”¨å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/tools/mcp       # MCPè¿æ¥
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/tools/mcp/servers # MCPæœåŠ¡å™¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GET /api/tools/plugins    # æ’ä»¶åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ acp.py                        # [NEW] ACPäº’è”
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ å‘ç°æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/acp/discover        # è§¦å‘å‘ç°
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/acp/agents           # å‘ç°åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GET /api/acp/agents/{id}      # Agentè¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ è¿æ¥æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/acp/connect         # å»ºç«‹è¿æ¥
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DELETE /api/acp/connect/{id}  # æ–­å¼€è¿æ¥
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/acp/connections      # è¿æ¥åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GET /api/acp/connections/{id} # è¿æ¥è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ç¾¤ç»„æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/acp/groups          # åˆ›å»ºç¾¤ç»„
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/acp/groups           # ç¾¤ç»„åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/acp/groups/{id}      # ç¾¤ç»„è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PUT /api/acp/groups/{id}      # æ›´æ–°ç¾¤ç»„
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DELETE /api/acp/groups/{id}   # åˆ é™¤ç¾¤ç»„
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/acp/groups/{id}/join    # åŠ å…¥ç¾¤ç»„
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/acp/groups/{id}/leave   # é€€å‡ºç¾¤ç»„
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ POST /api/acp/groups/{id}/invite  # é‚€è¯·æˆå‘˜
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ POST /api/acp/groups/{id}/kick    # è¸¢å‡ºæˆå‘˜
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ æ¶ˆæ¯æ¨¡å—
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ POST /api/acp/send             # å‘é€æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ POST /api/acp/send/group       # ç¾¤å‘æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ GET /api/acp/messages          # æ¶ˆæ¯å†å²
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ GET /api/acp/messages/{id}     # æ¶ˆæ¯è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ DELETE /api/acp/messages/{id}  # åˆ é™¤æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.py                        # [NEW] ç®¡ç†API
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/admin/dashboard    # ä»ªè¡¨ç›˜
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/admin/stats        # ç»Ÿè®¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/admin/config       # é…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PUT /api/admin/config       # æ›´æ–°é…ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/admin/logs         # æ—¥å¿—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GET /api/admin/health       # å¥åº·æ£€æŸ¥
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ POST /api/admin/backup      # å¤‡ä»½
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ openai.py                       # [NEW] OpenAIå…¼å®¹
â”‚   â”‚   â”‚       â”œâ”€â”€ POST /v1/chat/completions   # èŠå¤©å®Œæˆ
â”‚   â”‚   â”‚       â”œâ”€â”€ GET /v1/models              # æ¨¡å‹åˆ—è¡¨
â”‚   â”‚   â”‚       â”œâ”€â”€ POST /v1/embeddings         # åµŒå…¥
â”‚   â”‚   â”‚       â””â”€â”€ GET /v1/tools               # å·¥å…·åˆ—è¡¨
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ websocket.py                  # [NEW] WebSocketå¤„ç†
â”‚   â”‚       â”œâ”€â”€ handle_chat()             # èŠå¤©å¤„ç†
â”‚   â”‚       â”œâ”€â”€ handle_acp()              # ACPæ¶ˆæ¯
â”‚   â”‚       â”œâ”€â”€ handle_events()           # äº‹ä»¶æ¨é€
â”‚   â”‚       â””â”€â”€ connection_manager        # è¿æ¥ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ memory.py                     # [NEW] è®°å¿†æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryType (Enum)         # permanent/long_term/short_term
â”‚   â”‚   â”‚   â”œâ”€â”€ Memory (Dataclass)        # è®°å¿†æ•°æ®ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryCreate (Schema)     # åˆ›å»ºè¯·æ±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryUpdate (Schema)     # æ›´æ–°è¯·æ±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryResponse (Schema)   # å“åº”
â”‚   â”‚   â”‚   â””â”€â”€ MemorySearch (Schema)     # æœç´¢è¯·æ±‚
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ context.py                    # [NEW] ä¸Šä¸‹æ–‡æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ Session (Dataclass)       # ä¼šè¯
â”‚   â”‚   â”‚   â”œâ”€â”€ Message (Dataclass)       # æ¶ˆæ¯
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionCreate (Schema)    # åˆ›å»ºä¼šè¯
â”‚   â”‚   â”‚   â””â”€â”€ MessageCreate (Schema)    # åˆ›å»ºæ¶ˆæ¯
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ acp.py                        # [NEW] ACPæ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ ACPAgent (Dataclass)      # Agentä¿¡æ¯
â”‚   â”‚   â”‚   â”œâ”€â”€ ACPConnection (Dataclass) # è¿æ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ ACPGroup (Dataclass)      # ç¾¤ç»„
â”‚   â”‚   â”‚   â”œâ”€â”€ ACPGroupMember (Dataclass)# ç¾¤ç»„æˆå‘˜
â”‚   â”‚   â”‚   â”œâ”€â”€ ACPMessage (Dataclass)    # æ¶ˆæ¯
â”‚   â”‚   â”‚   â”œâ”€â”€ AgentStatus (Enum)        # åœ¨çº¿/ç¦»çº¿/å¿™ç¢Œ
â”‚   â”‚   â”‚   â””â”€â”€ MessageType (Enum)        # æ¶ˆæ¯ç±»å‹
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ config.py                     # [NEW] é…ç½®æ¨¡å‹
â”‚   â”‚       â”œâ”€â”€ LLMConfig                 # LLMé…ç½®
â”‚   â”‚       â”œâ”€â”€ VectorConfig              # å‘é‡é…ç½®
â”‚   â”‚       â”œâ”€â”€ ACPConfig                 # ACPé…ç½®
â”‚   â”‚       â””â”€â”€ CXHMSConfig               # å®Œæ•´é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ memory/                       # è®°å¿†ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py                # [FROM core/memory/manager.py]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryManager (Class)# è®°å¿†ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ write_memory()        # å†™å…¥
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get_memory()          # è¯»å–
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ search_memories()     # æœç´¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ update_memory()       # æ›´æ–°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ delete_memory()       # åˆ é™¤
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get_statistics()      # ç»Ÿè®¡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...                   # å…¶ä»–æ–¹æ³•
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ vector_store.py           # [FROM core/memory/vector_store.py]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ QdrantVectorStore     # å‘é‡å­˜å‚¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ add_memory_vector()   # æ·»åŠ å‘é‡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ search_similar()      # ç›¸ä¼¼æœç´¢
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ sync_with_sqlite()    # åŒæ­¥
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ embedding.py              # [FROM core/memory/embedding.py]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EmbeddingModel (ABC)  # æŠ½è±¡åŸºç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OllamaEmbedding       # Ollamaå®ç°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SentenceTransformersEmbedding
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ EmbeddingFactory      # å·¥å‚
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ hybrid_search.py          # [FROM core/memory/hybrid_search.py]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HybridSearch          # æ··åˆæœç´¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ search()              # æ‰§è¡Œæœç´¢
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ _merge_results()      # åˆå¹¶ç»“æœ
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ router.py                 # [FROM core/memory/context_router.py]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryRouter          # è®°å¿†è·¯ç”±
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ route()               # è·¯ç”±å†³ç­–
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ _score_memories()     # è¯„åˆ†
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ decay.py                  # [FROM core/memory/decay.py]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DecayCalculator       # è¡°å‡è®¡ç®—å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ calculate_decay()     # è®¡ç®—è¡°å‡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ calculate_time_score()# æ—¶é—´åˆ†æ•°
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ importance_to_score() # é‡è¦æ€§è½¬æ¢
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ emotion.py                # [FROM core/memory/emotion_analyzer.py]
â”‚   â”‚   â”‚       â”œâ”€â”€ EmotionAnalyzer       # æƒ…æ„Ÿåˆ†æå™¨
â”‚   â”‚   â”‚       â”œâ”€â”€ analyze()             # åˆ†ææƒ…æ„Ÿ
â”‚   â”‚   â”‚       â””â”€â”€ get_emotion_score()   # è·å–åˆ†æ•°
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ context/                      # ä¸Šä¸‹æ–‡ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py                # [NEW] ä¸Šä¸‹æ–‡ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ContextManager (Class)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create_session()      # åˆ›å»ºä¼šè¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get_session()         # è·å–ä¼šè¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ append_message()      # æ·»åŠ æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get_messages()        # è·å–æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ delete_session()      # åˆ é™¤ä¼šè¯
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ summarizer.py             # [NEW] å¯¹è¯æ‘˜è¦
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ContextSummarizer     # æ‘˜è¦ç”Ÿæˆå™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ summarize()           # ç”Ÿæˆæ‘˜è¦
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ extract_key_points()  # æå–è¦ç‚¹
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ history.py                # [NEW] å†å²ç®¡ç†
â”‚   â”‚   â”‚       â”œâ”€â”€ HistoryManager        # å†å²ç®¡ç†å™¨
â”‚   â”‚   â”‚       â”œâ”€â”€ get_history()         # è·å–å†å²
â”‚   â”‚   â”‚       â”œâ”€â”€ clear_history()       # æ¸…ç†å†å²
â”‚   â”‚   â”‚       â””â”€â”€ export_history()      # å¯¼å‡ºå†å²
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ tools/                        # å·¥å…·ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ registry.py               # [FROM core/tool_registry.py]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ToolRegistry          # å·¥å…·æ³¨å†Œè¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ register_tool()       # æ³¨å†Œå·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get_tool()            # è·å–å·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ list_tools()          # åˆ—å‡ºå·¥å…·
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ call_tool()           # è°ƒç”¨å·¥å…·
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ export_tools()        # å¯¼å‡ºå·¥å…·
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ executor.py               # [NEW] å·¥å…·æ‰§è¡Œå™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ToolExecutor          # æ‰§è¡Œå™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ execute()             # æ‰§è¡Œå·¥å…·
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validate_args()       # éªŒè¯å‚æ•°
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ mcp.py                    # [FROM core/mcp_manager.py]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MCPManager            # MCPç®¡ç†å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ add_server()          # æ·»åŠ æœåŠ¡å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ remove_server()       # ç§»é™¤æœåŠ¡å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get_tools()           # è·å–å·¥å…·
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ call_tool()           # è°ƒç”¨å·¥å…·
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ plugin.py                 # [FROM core/plugin_manager.py]
â”‚   â”‚   â”‚       â”œâ”€â”€ PluginManager         # æ’ä»¶ç®¡ç†å™¨
â”‚   â”‚   â”‚       â”œâ”€â”€ register_plugin()     # æ³¨å†Œæ’ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ start_plugin()        # å¯åŠ¨æ’ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ stop_plugin()         # åœæ­¢æ’ä»¶
â”‚   â”‚   â”‚       â””â”€â”€ get_plugins()         # è·å–æ’ä»¶
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ acp/                          # [NEW] ACPäº’è”ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py                # ACPæ€»ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ACPManager (Class)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ start()               # å¯åŠ¨æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ stop()                # åœæ­¢æœåŠ¡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get_status()          # è·å–çŠ¶æ€
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ get_statistics()      # ç»Ÿè®¡ä¿¡æ¯
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ discover.py               # å±€åŸŸç½‘å‘ç°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ACPLanDiscovery (Class)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ start_discovery()     # å¼€å§‹å‘ç°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ stop_discovery()      # åœæ­¢å‘ç°
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ scan_network()        # æ‰«æç½‘ç»œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ broadcast_presence()  # å¹¿æ’­åœ¨çº¿
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ handle_beacon()       # å¤„ç†ä¿¡æ ‡
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ connection.py             # è¿æ¥ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ACPConnectionManager  # è¿æ¥ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ connect()             # å»ºç«‹è¿æ¥
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ disconnect()          # æ–­å¼€è¿æ¥
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ send_message()        # å‘é€æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ is_connected()        # æ£€æŸ¥è¿æ¥
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ group.py                  # ç¾¤ç»„ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ACPGroupManager       # ç¾¤ç»„ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create_group()        # åˆ›å»ºç¾¤ç»„
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ join_group()          # åŠ å…¥ç¾¤ç»„
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ leave_group()         # é€€å‡ºç¾¤ç»„
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ invite_member()       # é‚€è¯·æˆå‘˜
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ kick_member()         # è¸¢å‡ºæˆå‘˜
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ broadcast()           # ç¾¤å‘æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ get_groups()          # è·å–ç¾¤ç»„
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ message.py                # æ¶ˆæ¯ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ACPMessageManager     # æ¶ˆæ¯ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ send()                # å‘é€æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ broadcast()           # å¹¿æ’­æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get_history()         # è·å–å†å²
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ mark_read()           # æ ‡è®°å·²è¯»
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ delete_message()      # åˆ é™¤æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ protocol.py               # åè®®å®šä¹‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ACPProtocol (Class)   # åè®®å¤„ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ encode_message()      # ç¼–ç æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ decode_message()      # è§£ç æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ validate_message()    # éªŒè¯æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ sync.py                   # ä¼šè¯åŒæ­¥
â”‚   â”‚   â”‚       â”œâ”€â”€ ACPSyncManager        # åŒæ­¥ç®¡ç†å™¨
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ sync_session()    # åŒæ­¥ä¼šè¯
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ pull_updates()    # æ‹‰å–æ›´æ–°
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ push_updates()    # æ¨é€æ›´æ–°
â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚       â””â”€â”€ SessionSync           # ä¼šè¯åŒæ­¥ç±»
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ llm/                          # LLMæœåŠ¡
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ client.py                 # [FROM llm/client.py]
â”‚   â”‚       â”‚   â”œâ”€â”€ LLMClient (ABC)       # æŠ½è±¡å®¢æˆ·ç«¯
â”‚   â”‚       â”‚   â”œâ”€â”€ OllamaClient          # Ollamaå®ç°
â”‚   â”‚       â”‚   â””â”€â”€ VLLMClient            # VLLMå®ç°
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ factory.py                # [FROM llm/ollama_client.py]
â”‚   â”‚       â”‚   â”œâ”€â”€ LLMFactory            # LLMå·¥å‚
â”‚   â”‚       â”‚   â”œâ”€â”€ create_client()       # åˆ›å»ºå®¢æˆ·ç«¯
â”‚   â”‚       â”‚   â””â”€â”€ get_client()          # è·å–å®¢æˆ·ç«¯
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ tools.py                  # [FROM llm/tools.py]
â”‚   â”‚           â”œâ”€â”€ LLMTools              # LLMå·¥å…·
â”‚   â”‚           â””â”€â”€ format_tools()        # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚
â”‚   â””â”€â”€ storage/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”‚
â”‚       â”œâ”€â”€ database/
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ connection.py             # [FROM core/database/async_pool.py]
â”‚       â”‚   â”‚   â”œâ”€â”€ AsyncConnectionPool   # å¼‚æ­¥è¿æ¥æ± 
â”‚       â”‚   â”‚   â”œâ”€â”€ get_connection()      # è·å–è¿æ¥
â”‚       â”‚   â”‚   â””â”€â”€ close_all()           # å…³é—­æ‰€æœ‰
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ migrations.py             # [NEW] æ•°æ®åº“è¿ç§»
â”‚       â”‚       â”œâ”€â”€ run_migrations()      # æ‰§è¡Œè¿ç§»
â”‚       â”‚       â”œâ”€â”€ create_tables()       # åˆ›å»ºè¡¨
â”‚       â”‚       â””â”€â”€ seed_data()           # åˆå§‹æ•°æ®
â”‚       â”‚
â”‚       â””â”€â”€ vector/
â”‚           â”œâ”€â”€ __init__.py
â”‚          .py                 â””â”€â”€ qdrant # [NEW] Qdrantå®¢æˆ·ç«¯å°è£…
â”‚               â”œâ”€â”€ get_client()          # è·å–å®¢æˆ·ç«¯
â”‚               â”œâ”€â”€ ensure_collection()   # ç¡®ä¿é›†åˆ
â”‚               â””â”€â”€ close()               # å…³é—­
â”‚
â”œâ”€â”€ webui/                                 # Gradio WebUI
â”‚   â”œâ”€â”€ app.py                             # [NEW] ä¸»åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ create_app()                   # åˆ›å»ºåº”ç”¨
â”‚   â”‚   â””â”€â”€ get_gradio_blocks()           # Gradio Blocks
â”‚   â”‚
â”‚   â”œâ”€â”€ tabs/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ chat_tab.py                   # [NEW] èŠå¤©ç•Œé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatTab (Class)
â”‚   â”‚   â”‚   â”œâ”€â”€ render()                  # æ¸²æŸ“ç•Œé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ handle_message()          # å¤„ç†æ¶ˆæ¯
â”‚   â”‚   â”‚   â”œâ”€â”€ handle_stream()           # å¤„ç†æµå¼
â”‚   â”‚   â”‚   â””â”€â”€ render_message()          # æ¸²æŸ“æ¶ˆæ¯
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ memory_tab.py                 # [FROM webui/é€‚é…]
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryTab (Class)
â”‚   â”‚   â”‚   â”œâ”€â”€ render()                  # æ¸²æŸ“
â”‚   â”‚   â”‚   â”œâ”€â”€ render_list()             # æ¸²æŸ“åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ render_editor()           # æ¸²æŸ“ç¼–è¾‘å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ handle_create()           # åˆ›å»º
â”‚   â”‚   â”‚   â”œâ”€â”€ handle_update()           # æ›´æ–°
â”‚   â”‚   â”‚   â”œâ”€â”€ handle_delete()           # åˆ é™¤
â”‚   â”‚   â”‚   â””â”€â”€ handle_search()           # æœç´¢
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ tools_tab.py                  # [NEW] å·¥å…·ç•Œé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ToolsTab (Class)
â”‚   â”‚   â”‚   â”œâ”€â”€ render()                  # æ¸²æŸ“
â”‚   â”‚   â”‚   â”œâ”€â”€ render_registry()         # æ¸²æŸ“æ³¨å†Œè¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ render_mcp()              # æ¸²æŸ“MCP
â”‚   â”‚   â”‚   â”œâ”€â”€ handle_register()         # æ³¨å†Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ handle_mcp_connect()      # MCPè¿æ¥
â”‚   â”‚   â”‚   â””â”€â”€ handle_test()             # æµ‹è¯•
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ acp_tab.py                    # [NEW] ACPç•Œé¢ â† é‡ç‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ ACPTab (Class)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ render()                  # æ¸²æŸ“ä¸»ç•Œé¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ render_discover()     # å‘ç°æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ render_connections()  # è¿æ¥æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ render_groups()       # ç¾¤ç»„æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ render_messages()     # æ¶ˆæ¯æ¨¡å—
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ render_discover()         # å‘ç°ç•Œé¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ scan_button           # æ‰«ææŒ‰é’®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ agent_list            # Agentåˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ connect_button        # è¿æ¥æŒ‰é’®
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ status_indicator      # çŠ¶æ€æŒ‡ç¤º
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ render_connections()      # è¿æ¥ç•Œé¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ connection_list       # è¿æ¥åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ disconnect_button     # æ–­å¼€æŒ‰é’®
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ send_message_box      # å‘é€æ¡†
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ render_groups()           # ç¾¤ç»„ç•Œé¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ group_list            # ç¾¤ç»„åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create_group_btn      # åˆ›å»ºæŒ‰é’®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ join_group_btn        # åŠ å…¥æŒ‰é’®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ group_members         # æˆå‘˜åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ broadcast_box         # ç¾¤å‘æ¡†
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ render_messages()         # æ¶ˆæ¯ç•Œé¢
â”‚   â”‚   â”‚       â”œâ”€â”€ message_list          # æ¶ˆæ¯åˆ—è¡¨
â”‚   â”‚   â”‚       â”œâ”€â”€ message_detail        # æ¶ˆæ¯è¯¦æƒ…
â”‚   â”‚   â”‚       â””â”€â”€ delete_button         # åˆ é™¤æŒ‰é’®
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ settings_tab.py               # [NEW] è®¾ç½®ç•Œé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsTab (Class)
â”‚   â”‚   â”‚   â”œâ”€â”€ render()                  # æ¸²æŸ“
â”‚   â”‚   â”‚   â”œâ”€â”€ render_llm()              # LLMè®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ render_vector()           # å‘é‡è®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ render_acp()              # ACPè®¾ç½®
â”‚   â”‚   â”‚   â””â”€â”€ handle_save()             # ä¿å­˜
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ admin_tab.py                  # [NEW] ç®¡ç†ç•Œé¢
â”‚   â”‚       â”œâ”€â”€ AdminTab (Class)
â”‚   â”‚       â”œâ”€â”€ render()                  # æ¸²æŸ“
â”‚   â”‚       â”œâ”€â”€ render_dashboard()        # ä»ªè¡¨ç›˜
â”‚   â”‚       â”œâ”€â”€ render_stats()            # ç»Ÿè®¡
â”‚   â”‚       â”œâ”€â”€ render_logs()             # æ—¥å¿—
â”‚   â”‚       â””â”€â”€ render_health()           # å¥åº·
â”‚   â”‚
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”‚
â”‚       â”œâ”€â”€ chat.py                       # [NEW] èŠå¤©ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ MessageBubble             # æ¶ˆæ¯æ°”æ³¡
â”‚       â”‚   â”œâ”€â”€ ChatInput                # è¾“å…¥æ¡†
â”‚       â”‚   â”œâ”€â”€ StreamingIndicator       # æµå¼æŒ‡ç¤ºå™¨
â”‚       â”‚   â””â”€â”€ TypingIndicator          # æ‰“å­—æŒ‡ç¤ºå™¨
â”‚       â”‚
â”‚       â”œâ”€â”€ memory.py                     # [NEW] è®°å¿†ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ MemoryCard               # è®°å¿†å¡ç‰‡
â”‚       â”‚   â”œâ”€â”€ MemoryEditor             # è®°å¿†ç¼–è¾‘å™¨
â”‚       â”‚   â”œâ”€â”€ MemorySearch             # æœç´¢æ¡†
â”‚       â”‚   â””â”€â”€ MemoryStats              # ç»Ÿè®¡
â”‚       â”‚
â”‚       â”œâ”€â”€ acp.py                        # [NEW] ACPç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ AgentCard                # Agentå¡ç‰‡
â”‚       â”‚   â”œâ”€â”€ GroupCard                # ç¾¤ç»„å¡ç‰‡
â”‚       â”‚   â”œâ”€â”€ ConnectionStatus         # è¿æ¥çŠ¶æ€
â”‚       â”‚   â””â”€â”€ MessageItem              # æ¶ˆæ¯é¡¹
â”‚       â”‚
â”‚       â””â”€â”€ common.py                     # [NEW] å…¬å…±ç»„ä»¶
â”‚           â”œâ”€â”€ LoadingSpinner            # åŠ è½½åŠ¨ç”»
â”‚           â”œâ”€â”€ ConfirmDialog            # ç¡®è®¤å¯¹è¯æ¡†
â”‚           â”œâ”€â”€ Toast                    # æç¤º
â”‚           â”œâ”€â”€ Table                    # è¡¨æ ¼
â”‚           â””â”€â”€ Tabs                     # æ ‡ç­¾é¡µ
â”‚
â”œâ”€â”€ data/                                  # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ memories.db                       # SQLiteæ•°æ®åº“
â”‚   â”‚
â”‚   â”œâ”€â”€ acp/                              # ACPæ•°æ®
â”‚   â”‚   â”œâ”€â”€ agents.yaml                   # å‘ç°Agentsç¼“å­˜
â”‚   â”‚   â”œâ”€â”€ groups.yaml                   # ç¾¤ç»„é…ç½®
â”‚   â”‚   â”œâ”€â”€ connections.yaml              # è¿æ¥é…ç½®
â”‚   â”‚   â””â”€â”€ messages/                     # æ¶ˆæ¯å†å²
â”‚   â”‚       â”œâ”€â”€ inbox/                    # æ”¶ä»¶ç®±
â”‚   â”‚       â”œâ”€â”€ sent/                     # å·²å‘é€
â”‚   â”‚       â””â”€â”€ groups/                   # ç¾¤ç»„æ¶ˆæ¯
â”‚   â”‚
â”‚   â””â”€â”€ workspaces/                       # å·¥ä½œåŒº
â”‚       â”œâ”€â”€ default/                      # é»˜è®¤å·¥ä½œåŒº
â”‚       â””â”€â”€ acp/                          # ACPå·¥ä½œåŒº
â”‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ settings.py                       # [NEW] è®¾ç½®ç±»
â”‚   â””â”€â”€ default.yaml                      # [NEW] é»˜è®¤é…ç½®
â”‚       â”œâ”€â”€ llm:                          # LLMé…ç½®
â”‚       â”‚   â”œâ”€â”€ provider: "ollama"
â”‚       â”‚   â”œâ”€â”€ host: "http://localhost:11434"
â”‚       â”‚   â””â”€â”€ model: "llama3.2"
â”‚       â”‚
â”‚       â”œâ”€â”€ vector:                       # å‘é‡é…ç½®
â”‚       â”‚   â”œâ”€â”€ enabled: true
â”‚       â”‚   â”œâ”€â”€ host: "localhost"
â”‚       â”‚   â””â”€â”€ port: 6333
â”‚       â”‚
â”‚       â”œâ”€â”€ acp:                          # ACPé…ç½® â† æ–°å¢
â”‚       â”‚   â”œâ”€â”€ enabled: true
â”‚       â”‚   â”œâ”€â”€ port: 9999
â”‚       â”‚   â”œâ”€â”€ discovery_interval: 30
â”‚       â”‚   â”œâ”€â”€ broadcast_port: 9998
â”‚       â”‚   â””â”€â”€ group_port: 9997
â”‚       â”‚
â”‚       â”œâ”€â”€ system:                       # ç³»ç»Ÿé…ç½®
â”‚       â”‚   â”œâ”€â”€ host: "0.0.0.0"
â”‚       â”‚   â”œâ”€â”€ port: 8000
â”‚       â”‚   â”œâ”€â”€ debug: false
â”‚       â”‚   â””â”€â”€ log_level: "INFO"
â”‚       â”‚
â”‚       â””â”€â”€ database:                     # æ•°æ®åº“é…ç½®
â”‚           â””â”€â”€ path: "data/memories.db"
â”‚
â”œâ”€â”€ requirements.txt                       # Pythonä¾èµ–
â”‚   â”œâ”€â”€ fastapi>=0.100.0
â”‚   â”œâ”€â”€ uvicorn>=0.22.0
â”‚   â”œâ”€â”€ pydantic>=2.0.0
â”‚   â”œâ”€â”€ sqlalchemy>=2.0.0
â”‚   â”œâ”€â”€ aiosqlite>=0.19.0
â”‚   â”œâ”€â”€ qdrant-client>=1.7.0
â”‚   â”œâ”€â”€ httpx>=0.24.0
â”‚   â”œâ”€â”€ pyyaml>=6.0.0
â”‚   â”œâ”€â”€ grpcio>=1.60.0
â”‚   â”œâ”€â”€ grpcio-tools>=1.60.0
â”‚   â””â”€â”€ gradio>=4.0.0
â”‚
â”œâ”€â”€ Dockerfile                            # Dockeré•œåƒ
â”œâ”€â”€ docker-compose.yml                    # Dockerç¼–æ’
â””â”€â”€ README.md                             # æ–‡æ¡£
```

---

## è¯¦ç»†å®æ–½è®¡åˆ’ (å…±20å¤©)

### Day 1-2: é¡¹ç›®åŸºç¡€æ¶æ„
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| åˆ›å»ºé¡¹ç›®ç»“æ„ | æ‰€æœ‰ç›®å½• | åˆ›å»ºCXHMSç›®å½•åŠå­ç›®å½• |
| é…ç½®ç³»ç»Ÿ | `config/settings.py` | CXHMSSettingsé…ç½®ç±» |
| é»˜è®¤é…ç½® | `config/default.yaml` | YAMLé…ç½®æ–‡ä»¶ |
| å…¥å£æ–‡ä»¶ | `backend/main.py` | FastAPIåº”ç”¨å…¥å£ |

### Day 3-4: æ•°æ®åº“ä¸å­˜å‚¨
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| æ•°æ®åº“è¿æ¥ | `backend/storage/database/connection.py` | å¼‚æ­¥è¿æ¥æ±  |
| æ•°æ®åº“è¿ç§» | `backend/storage/database/migrations.py` | åˆ›å»ºè¡¨ç»“æ„ |
| Qdrantå®¢æˆ·ç«¯ | `backend/storage/vector/qdrant.py` | å°è£…å®¢æˆ·ç«¯ |

### Day 5-7: è®°å¿†ç³»ç»Ÿ
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| è®°å¿†æ¨¡å‹ | `backend/models/memory.py` | Memoryæ•°æ®ç±» |
| è®°å¿†ç®¡ç†å™¨ | `backend/core/memory/manager.py` | CRUDæ“ä½œ |
| å‘é‡å­˜å‚¨ | `backend/core/memory/vector_store.py` | Qdranté›†æˆ |
| åµŒå…¥æ¨¡å‹ | `backend/core/memory/embedding.py` | Ollama/STå®ç° |
| æ··åˆæœç´¢ | `backend/core/memory/hybrid_search.py` | å‘é‡+å…³é”®è¯ |
| è®°å¿†è·¯ç”± | `backend/core/memory/router.py` | è·¯ç”±å†³ç­– |
| è¡°å‡ç®—æ³• | `backend/core/memory/decay.py` | æ—¶é—´è¡°å‡ |
| æƒ…æ„Ÿåˆ†æ | `backend/core/memory/emotion.py` | æƒ…æ„Ÿææ€§ |

### Day 8-9: ä¸Šä¸‹æ–‡ç®¡ç†
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| ä¸Šä¸‹æ–‡æ¨¡å‹ | `backend/models/context.py` | Session/Message |
| ä¸Šä¸‹æ–‡ç®¡ç†å™¨ | `backend/core/context/manager.py` | ä¼šè¯ç®¡ç† |
| å¯¹è¯æ‘˜è¦ | `backend/core/context/summarizer.py` | LLMæ‘˜è¦ç”Ÿæˆ |
| å†å²ç®¡ç† | `backend/core/context/history.py` | å†å²è®°å½• |

### Day 10-12: å·¥å…·ç³»ç»Ÿ
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| å·¥å…·æ¨¡å‹ | `backend/models/tool.py` | Toolå®šä¹‰ |
| å·¥å…·æ³¨å†Œè¡¨ | `backend/core/tools/registry.py` | æ³¨å†Œ/è°ƒç”¨ |
| å·¥å…·æ‰§è¡Œå™¨ | `backend/core/tools/executor.py` | å‚æ•°éªŒè¯/æ‰§è¡Œ |
| MCPå®¢æˆ·ç«¯ | `backend/core/tools/mcp.py` | MCPåè®® |
| æ’ä»¶ç³»ç»Ÿ | `backend/core/tools/plugin.py` | æ’ä»¶ç®¡ç† |

### Day 13-16: ACPäº’è”ç³»ç»Ÿ â† æ ¸å¿ƒ
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| ACPæ¨¡å‹ | `backend/models/acp.py` | Agent/Connection/Group |
| ACPæ€»ç®¡ç†å™¨ | `backend/core/acp/manager.py` | å¯åŠ¨/åœæ­¢/çŠ¶æ€ |
| å±€åŸŸç½‘å‘ç° | `backend/core/acp/discover.py` | UDPå¹¿æ’­æ‰«æ |
| è¿æ¥ç®¡ç† | `backend/core/acp/connection.py` | TCPé•¿è¿æ¥ |
| ç¾¤ç»„ç®¡ç† | `backend/core/acp/group.py` | ç¾¤ç»„CRUD/æˆå‘˜ |
| æ¶ˆæ¯ç³»ç»Ÿ | `backend/core/acp/message.py` | æ¶ˆæ¯æ”¶å‘/å†å² |
| åè®®å®šä¹‰ | `backend/core/acp/protocol.py` | æ¶ˆæ¯ç¼–è§£ç  |
| ä¼šè¯åŒæ­¥ | `backend/core/acp/sync.py` | è·¨å·¥ä½œåŒºåŒæ­¥ |

### Day 17: LLMæœåŠ¡
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| LLMå®¢æˆ·ç«¯ | `backend/core/llm/client.py` | Ollama/VLLM |
| LLMå·¥å‚ | `backend/core/llm/factory.py` | å®¢æˆ·ç«¯å·¥å‚ |
| å·¥å…·è°ƒç”¨ | `backend/core/llm/tools.py` | OpenAI Functions |

### Day 18-19: APIå±‚
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| FastAPIåº”ç”¨ | `backend/api/app.py` | ä¸­é—´ä»¶/è·¯ç”± |
| èŠå¤©API | `backend/api/routers/chat.py` | SSEæµå¼å“åº” |
| è®°å¿†API | `backend/api/routers/memory.py` | CRUD |
| ä¸Šä¸‹æ–‡API | `backend/api/routers/context.py` | ä¼šè¯ç®¡ç† |
| å·¥å…·API | `backend/api/routers/tools.py` | å·¥å…·/æ’ä»¶ |
| ACP API | `backend/api/routers/acp.py` | äº’è”æ¥å£ |
| ç®¡ç†API | `backend/api/routers/admin.py` | ä»ªè¡¨ç›˜/æ—¥å¿— |
| OpenAIå…¼å®¹ | `backend/api/routers/openai.py` | /v1/chat/completions |
| WebSocket | `backend/api/websocket.py` | å®æ—¶é€šè®¯ |

### Day 20: WebUIç•Œé¢
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| Gradioåº”ç”¨ | `webui/app.py` | ä¸»åº”ç”¨å…¥å£ |
| èŠå¤©ç•Œé¢ | `webui/tabs/chat_tab.py` | å¯¹è¯ç•Œé¢ |
| è®°å¿†ç•Œé¢ | `webui/tabs/memory_tab.py` | è®°å¿†ç®¡ç† |
| å·¥å…·ç•Œé¢ | `webui/tabs/tools_tab.py` | å·¥å…·é…ç½® |
| **ACPç•Œé¢** | `webui/tabs/acp_tab.py` | **å‘ç°/ç¾¤ç»„/æ¶ˆæ¯** |
| è®¾ç½®ç•Œé¢ | `webui/tabs/settings_tab.py` | é…ç½®é¡µé¢ |
| ç®¡ç†ç•Œé¢ | `webui/tabs/admin_tab.py` | ç›‘æ§é¢æ¿ |
| å…¬å…±ç»„ä»¶ | `webui/components/*.py` | UIç»„ä»¶ |

### Day 21-22: æµ‹è¯•ä¸ä¼˜åŒ–
| ä»»åŠ¡ | è¯¦ç»†æè¿° |
|------|----------|
| å•å…ƒæµ‹è¯• | æ¯ä¸ªæ¨¡å—æµ‹è¯•ç”¨ä¾‹ |
| é›†æˆæµ‹è¯• | APIç«¯ç‚¹æµ‹è¯• |
| æ€§èƒ½æµ‹è¯• | å‹åŠ›æµ‹è¯• |
| æ–‡æ¡£ç¼–å†™ | README/APIæ–‡æ¡£ |
| å®¹å™¨åŒ– | Dockerfile/docker-compose |

---

## å‰ç«¯åº”ç”¨ (React + TypeScript)

### æŠ€æœ¯æ ˆ
```
å‰ç«¯æŠ€æœ¯æ ˆ:
â”œâ”€â”€ React 18 + TypeScript           # UIæ¡†æ¶
â”œâ”€â”€ Vite 5                          # æ„å»ºå·¥å…·
â”œâ”€â”€ Ant Design 5                    # UIç»„ä»¶åº“
â”œâ”€â”€ Zustand                         # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ React Router 6                  # è·¯ç”±
â”œâ”€â”€ Axios                           # HTTPå®¢æˆ·ç«¯
â”œâ”€â”€ React Query                     # æ•°æ®è¯·æ±‚/ç¼“å­˜
â”œâ”€â”€ Socket.io Client                # WebSocketå®¢æˆ·ç«¯
â””â”€â”€ Monaco Editor                   # ä»£ç ç¼–è¾‘å™¨
```

### ç›®å½•ç»“æ„
```
frontend/                                 # Reactå‰ç«¯åº”ç”¨
â”œâ”€â”€ public/                               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ index.html                        # HTMLæ¨¡æ¿
â”‚   â””â”€â”€ favicon.ico                       # å›¾æ ‡
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.tsx                          # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ App.tsx                           # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ vite-env.d.ts                     # Viteç±»å‹å£°æ˜
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                              # APIå±‚
â”‚   â”‚   â”œâ”€â”€ index.ts                      # Axioså®ä¾‹
â”‚   â”‚   â”œâ”€â”€ chat.ts                       # èŠå¤©API
â”‚   â”‚   â”œâ”€â”€ memory.ts                     # è®°å¿†API
â”‚   â”‚   â”œâ”€â”€ context.ts                    # ä¸Šä¸‹æ–‡API
â”‚   â”‚   â”œâ”€â”€ tools.ts                      # å·¥å…·API
â”‚   â”‚   â”œâ”€â”€ acp.ts                        # ACP API
â”‚   â”‚   â”œâ”€â”€ admin.ts                      # ç®¡ç†API
â”‚   â”‚   â””â”€â”€ ws.ts                         # WebSocket
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                       # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Layout/
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx                # é¡¶éƒ¨å¯¼èˆª
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx               # ä¾§è¾¹æ 
â”‚   â”‚   â”‚   â””â”€â”€ MainLayout.tsx            # ä¸»å¸ƒå±€
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Common/
â”‚   â”‚   â”‚   â”œâ”€â”€ PageHeader.tsx            # é¡µé¢æ ‡é¢˜
â”‚   â”‚   â”‚   â”œâ”€â”€ DataStats.tsx             # æ•°æ®ç»Ÿè®¡
â”‚   â”‚   â”‚   â”œâ”€â”€ StatusBadge.tsx           # çŠ¶æ€å¾½ç« 
â”‚   â”‚   â”‚   â”œâ”€â”€ ConfirmModal.tsx          # ç¡®è®¤å¯¹è¯æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ LoadingSpinner.tsx        # åŠ è½½åŠ¨ç”»
â”‚   â”‚   â”‚   â””â”€â”€ Toast.tsx                 # æç¤ºæ¶ˆæ¯
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Editor/
â”‚   â”‚       â”œâ”€â”€ MemoryEditor.tsx          # è®°å¿†ç¼–è¾‘å™¨
â”‚   â”‚       â”œâ”€â”€ CodeEditor.tsx            # ä»£ç ç¼–è¾‘å™¨
â”‚   â”‚       â””â”€â”€ JsonEditor.tsx            # JSONç¼–è¾‘å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                            # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Chat/                         # èŠå¤©é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx                 # èŠå¤©ä¸»é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatWindow.tsx            # èŠå¤©çª—å£
â”‚   â”‚   â”‚   â”œâ”€â”€ MessageList.tsx           # æ¶ˆæ¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ MessageInput.tsx          # è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatSidebar.tsx           # ä¾§è¾¹æ 
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionPanel.tsx          # ä¼šè¯é¢æ¿
â”‚   â”‚   â”‚   â””â”€â”€ StreamIndicator.tsx       # æµå¼æŒ‡ç¤º
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Memory/                       # è®°å¿†é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx                 # è®°å¿†ä¸»é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryList.tsx            # è®°å¿†åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryCard.tsx            # è®°å¿†å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryDetail.tsx          # è®°å¿†è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ MemorySearch.tsx          # æœç´¢
â”‚   â”‚   â”‚   â”œâ”€â”€ MemoryStats.tsx           # ç»Ÿè®¡
â”‚   â”‚   â”‚   â””â”€â”€ MemoryEditor.tsx          # ç¼–è¾‘å™¨
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Context/                      # ä¸Šä¸‹æ–‡é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx                 # ä¸Šä¸‹æ–‡ä¸»é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionList.tsx           # ä¼šè¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionDetail.tsx         # ä¼šè¯è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ MessageHistory.tsx        # æ¶ˆæ¯å†å²
â”‚   â”‚   â”‚   â””â”€â”€ ContextWindow.tsx         # ä¸Šä¸‹æ–‡çª—å£
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Tools/                        # å·¥å…·é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx                 # å·¥å…·ä¸»é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ ToolRegistry.tsx          # å·¥å…·æ³¨å†Œè¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ToolList.tsx              # å·¥å…·åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ToolCard.tsx              # å·¥å…·å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ MCPServers.tsx            # MCPæœåŠ¡å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ PluginList.tsx            # æ’ä»¶åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ ToolTester.tsx            # å·¥å…·æµ‹è¯•
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ACP/                          # ACPé¡µé¢ â† é‡ç‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx                 # ACPä¸»é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ DiscoverPanel.tsx         # å‘ç°é¢æ¿
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ScanButton.tsx        # æ‰«ææŒ‰é’®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AgentList.tsx         # Agentåˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AgentCard.tsx         # Agentå¡ç‰‡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ConnectButton.tsx     # è¿æ¥æŒ‰é’®
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ConnectionPanel.tsx       # è¿æ¥é¢æ¿
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ConnectionList.tsx    # è¿æ¥åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ConnectionItem.tsx    # è¿æ¥é¡¹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatBox.tsx           # èŠå¤©æ¡†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ StatusIndicator.tsx   # çŠ¶æ€æŒ‡ç¤º
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ GroupPanel.tsx            # ç¾¤ç»„é¢æ¿
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GroupList.tsx         # ç¾¤ç»„åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GroupCard.tsx         # ç¾¤ç»„å¡ç‰‡
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateGroup.tsx       # åˆ›å»ºç¾¤ç»„
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GroupMembers.tsx      # æˆå‘˜åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GroupChat.tsx         # ç¾¤ç»„èŠå¤©
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ MessagePanel.tsx          # æ¶ˆæ¯é¢æ¿
â”‚   â”‚   â”‚       â”œâ”€â”€ MessageList.tsx       # æ¶ˆæ¯åˆ—è¡¨
â”‚   â”‚   â”‚       â”œâ”€â”€ MessageItem.tsx       # æ¶ˆæ¯é¡¹
â”‚   â”‚   â”‚       â””â”€â”€ MessageDetail.tsx     # æ¶ˆæ¯è¯¦æƒ…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Settings/                     # è®¾ç½®é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx                 # è®¾ç½®ä¸»é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ LLMSettings.tsx           # LLMè®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ VectorSettings.tsx        # å‘é‡è®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ ACPSettings.tsx           # ACPè®¾ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ SystemSettings.tsx        # ç³»ç»Ÿè®¾ç½®
â”‚   â”‚   â”‚   â””â”€â”€ ConfigEditor.tsx          # é…ç½®ç¼–è¾‘
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Admin/                        # ç®¡ç†é¡µé¢
â”‚   â”‚       â”œâ”€â”€ index.tsx                 # ç®¡ç†ä¸»é¡µ
â”‚   â”‚       â”œâ”€â”€ Dashboard.tsx             # ä»ªè¡¨ç›˜
â”‚   â”‚       â”œâ”€â”€ Statistics.tsx            # ç»Ÿè®¡
â”‚   â”‚       â”œâ”€â”€ Logs.tsx                  # æ—¥å¿—
â”‚   â”‚       â”œâ”€â”€ Health.tsx                # å¥åº·æ£€æŸ¥
â”‚   â”‚       â””â”€â”€ Backup.tsx                # å¤‡ä»½
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                           # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.ts                      # Storeé…ç½®
â”‚   â”‚   â”œâ”€â”€ chatStore.ts                  # èŠå¤©çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ memoryStore.ts                # è®°å¿†çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ contextStore.ts               # ä¸Šä¸‹æ–‡çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ toolsStore.ts                 # å·¥å…·çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ acpStore.ts                   # ACPçŠ¶æ€
â”‚   â”‚   â””â”€â”€ uiStore.ts                    # UIçŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                            # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ useChat.ts                    # èŠå¤©Hook
â”‚   â”‚   â”œâ”€â”€ useMemory.ts                  # è®°å¿†Hook
â”‚   â”‚   â”œâ”€â”€ useContext.ts                 # ä¸Šä¸‹æ–‡Hook
â”‚   â”‚   â”œâ”€â”€ useTools.ts                   # å·¥å…·Hook
â”‚   â”‚   â”œâ”€â”€ useACP.ts                     # ACP Hook
â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts               # WebSocket Hook
â”‚   â”‚   â””â”€â”€ useDebounce.ts                # é˜²æŠ–Hook
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ index.ts                      # å¯¼å‡º
â”‚   â”‚   â”œâ”€â”€ format.ts                     # æ ¼å¼åŒ–
â”‚   â”‚   â”œâ”€â”€ validate.ts                   # éªŒè¯
â”‚   â”‚   â””â”€â”€ constants.ts                  # å¸¸é‡
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                           # æ ·å¼
â”‚   â”‚   â”œâ”€â”€ index.css                     # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ variables.css                 # å˜é‡
â”‚   â”‚   â””â”€â”€ animations.css                # åŠ¨ç”»
â”‚   â”‚
â”‚   â””â”€â”€ types/                            # ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ index.ts                      # å¯¼å‡º
â”‚       â”œâ”€â”€ memory.ts                     # è®°å¿†ç±»å‹
â”‚       â”œâ”€â”€ context.ts                    # ä¸Šä¸‹æ–‡ç±»å‹
â”‚       â”œâ”€â”€ acp.ts                        # ACPç±»å‹
â”‚       â””â”€â”€ api.ts                        # APIç±»å‹
â”‚
â”œâ”€â”€ .env                                  # ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.development                      # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ .env.production                       # ç”Ÿäº§ç¯å¢ƒ
â”œâ”€â”€ tsconfig.json                         # TypeScripté…ç½®
â”œâ”€â”€ vite.config.ts                        # Viteé…ç½®
â”œâ”€â”€ tailwind.config.js                    # Tailwindé…ç½®
â”œâ”€â”€ postcss.config.js                     # PostCSSé…ç½®
â”œâ”€â”€ index.html                            # HTMLæ¨¡æ¿
â”œâ”€â”€ package.json                          # ä¾èµ–
â””â”€â”€ README.md                             # æ–‡æ¡£
```

### åŠŸèƒ½ç‰¹æ€§

#### 1. èŠå¤©åŠŸèƒ½
- å®æ—¶æ¶ˆæ¯å‘é€ä¸æ¥æ”¶
- æµå¼å“åº”æ˜¾ç¤º
- å¤šä¼šè¯ç®¡ç†
- æ¶ˆæ¯å†å²è®°å½•
- ä»£ç è¯­æ³•é«˜äº®
- Markdownæ¸²æŸ“

#### 2. è®°å¿†ç®¡ç†
- è®°å¿†åˆ—è¡¨å±•ç¤º
- è®°å¿†è¯¦æƒ…æŸ¥çœ‹
- è®°å¿†æœç´¢ï¼ˆå…³é”®è¯/å‘é‡ï¼‰
- è®°å¿†ç¼–è¾‘ä¸åˆ é™¤
- è®°å¿†ç»Ÿè®¡å›¾è¡¨
- æ‰¹é‡æ“ä½œ

#### 3. ä¸Šä¸‹æ–‡ç®¡ç†
- ä¼šè¯åˆ—è¡¨
- æ¶ˆæ¯å†å²
- æ‘˜è¦ç”Ÿæˆ
- çª—å£ä¼˜åŒ–

#### 4. å·¥å…·ç³»ç»Ÿ
- å·¥å…·æ³¨å†Œè¡¨
- å·¥å…·æµ‹è¯•
- MCPæœåŠ¡å™¨ç®¡ç†
- æ’ä»¶ç®¡ç†

#### 5. ACPäº’è” â† é‡ç‚¹
- **å±€åŸŸç½‘å‘ç°**
  - ä¸€é”®æ‰«æç½‘ç»œ
  - Agentåˆ—è¡¨å±•ç¤º
  - Agentè¯¦æƒ…
  - ä¸€é”®è¿æ¥
  
- **è¿æ¥ç®¡ç†**
  - è¿æ¥åˆ—è¡¨
  - å®æ—¶èŠå¤©
  - çŠ¶æ€ç›‘æ§
  - æ–­å¼€è¿æ¥
  
- **ç¾¤ç»„ç³»ç»Ÿ**
  - åˆ›å»ºç¾¤ç»„
  - åŠ å…¥/é€€å‡ºç¾¤ç»„
  - æˆå‘˜ç®¡ç†
  - ç¾¤ç»„èŠå¤©
  
- **æ¶ˆæ¯ç³»ç»Ÿ**
  - æ¶ˆæ¯å†å²
  - æ¶ˆæ¯è¯¦æƒ…
  - æ¶ˆæ¯åˆ é™¤

#### 6. ç³»ç»Ÿè®¾ç½®
- LLMé…ç½®ï¼ˆæä¾›å•†/æ¨¡å‹/æ¸©åº¦ï¼‰
- å‘é‡é…ç½®ï¼ˆä¸»æœº/ç«¯å£/é›†åˆï¼‰
- ACPé…ç½®ï¼ˆå¯ç”¨/ç«¯å£/å‘ç°ï¼‰
- ç³»ç»Ÿé…ç½®ï¼ˆä¸»æœº/ç«¯å£/æ—¥å¿—ï¼‰

#### 7. ç®¡ç†åŠŸèƒ½
- ä»ªè¡¨ç›˜ç»Ÿè®¡
- æœåŠ¡å¥åº·æ£€æŸ¥
- æ—¥å¿—æŸ¥çœ‹
- æ•°æ®å¤‡ä»½

### å®æ–½è®¡åˆ’

#### Day 23-24: é¡¹ç›®æ­å»º
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| åˆ›å»ºViteé¡¹ç›® | `frontend/` | React + TypeScript |
| é…ç½®å¼€å‘ç¯å¢ƒ | `vite.config.ts` | ä»£ç†/çƒ­æ›´æ–° |
| å®‰è£…ä¾èµ– | `package.json` | Ant Designç­‰ |
| é…ç½®Tailwind | `tailwind.config.js` | æ ·å¼ |

#### Day 25-26: åŸºç¡€æ¶æ„
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| APIå±‚ | `src/api/` | Axioså°è£… |
| ç±»å‹å®šä¹‰ | `src/types/` | TypeScriptç±»å‹ |
| çŠ¶æ€ç®¡ç† | `src/stores/` | Zustand Store |
| è·¯ç”±é…ç½® | `App.tsx` | React Router |

#### Day 27-28: å…¬å…±ç»„ä»¶
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| å¸ƒå±€ç»„ä»¶ | `src/components/Layout/` | Header/Sidebar |
| å…¬å…±ç»„ä»¶ | `src/components/Common/` | å¼¹çª—/åŠ è½½/æç¤º |
| ç¼–è¾‘å™¨ç»„ä»¶ | `src/components/Editor/` | ä»£ç /JSONç¼–è¾‘å™¨ |

#### Day 29-30: èŠå¤©é¡µé¢
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| èŠå¤©çª—å£ | `src/pages/Chat/` | æ¶ˆæ¯åˆ—è¡¨/è¾“å…¥ |
| ä¼šè¯ç®¡ç† | `SessionPanel.tsx` | ä¼šè¯åˆ—è¡¨ |
| WebSocket | `src/hooks/useChat.ts` | å®æ—¶é€šè®¯ |

#### Day 31-32: è®°å¿†é¡µé¢
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| è®°å¿†åˆ—è¡¨ | `src/pages/Memory/` | åˆ—è¡¨/å¡ç‰‡/è¯¦æƒ… |
| æœç´¢åŠŸèƒ½ | `MemorySearch.tsx` | æ··åˆæœç´¢ |
| ç¼–è¾‘å™¨ | `MemoryEditor.tsx` | CRUDæ“ä½œ |

#### Day 33-34: ACPé¡µé¢ â† æ ¸å¿ƒ
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| å‘ç°é¢æ¿ | `src/pages/ACP/DiscoverPanel.tsx` | æ‰«æ/Agentåˆ—è¡¨ |
| è¿æ¥é¢æ¿ | `src/pages/ACP/ConnectionPanel.tsx` | è¿æ¥ç®¡ç†/èŠå¤© |
| ç¾¤ç»„é¢æ¿ | `src/pages/ACP/GroupPanel.tsx` | ç¾¤ç»„CRUD/èŠå¤© |
| æ¶ˆæ¯é¢æ¿ | `src/pages/ACP/MessagePanel.tsx` | æ¶ˆæ¯å†å² |

#### Day 35: å…¶ä»–é¡µé¢
| ä»»åŠ¡ | æ–‡ä»¶ | è¯¦ç»†æè¿° |
|------|------|----------|
| ä¸Šä¸‹æ–‡é¡µé¢ | `src/pages/Context/` | ä¼šè¯ç®¡ç† |
| å·¥å…·é¡µé¢ | `src/pages/Tools/` | å·¥å…·/æ’ä»¶ |
| è®¾ç½®é¡µé¢ | `src/pages/Settings/` | é…ç½®ç®¡ç† |
| ç®¡ç†é¡µé¢ | `src/pages/Admin/` | ä»ªè¡¨ç›˜/æ—¥å¿— |

#### Day 36: æµ‹è¯•ä¸ä¼˜åŒ–
| ä»»åŠ¡ | è¯¦ç»†æè¿° |
|------|----------|
| å•å…ƒæµ‹è¯• | Jest/Vitestæµ‹è¯• |
| E2Eæµ‹è¯• | Playwrightæµ‹è¯• |
| æ€§èƒ½ä¼˜åŒ– | ä»£ç åˆ†å‰²/æ‡’åŠ è½½ |
| æ‰“åŒ…éƒ¨ç½² | ç”Ÿäº§æ„å»º |

---

## éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æµè§ˆå™¨                            â”‚
â”‚                    (React Frontend)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Nginx                                â”‚
â”‚                   (åå‘ä»£ç†/é™æ€èµ„æº)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI    â”‚  â”‚   Gradio     â”‚  â”‚   å…¶ä»–æœåŠ¡    â”‚
â”‚   Backend    â”‚  â”‚    WebUI     â”‚  â”‚   (å¯é€‰)      â”‚
â”‚  (Port 8000) â”‚  â”‚  (Port 7860) â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”œâ”€â”€â”€â–¶â”‚  SQLite      â”‚  (è®°å¿†æ•°æ®)
       â”‚    â”‚  (memories.db)â”‚
       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”œâ”€â”€â”€â–¶â”‚  Qdrant      â”‚  (å‘é‡å­˜å‚¨)
       â”‚    â”‚  (Port 6333) â”‚
       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”œâ”€â”€â”€â–¶â”‚  Ollama      â”‚  (LLMæœåŠ¡)
            â”‚  (Port 11434)â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ€»ç»“

CXHMSé¡¹ç›®æä¾›å®Œæ•´çš„AIä»£ç†ä¸­é—´å±‚è§£å†³æ–¹æ¡ˆï¼š

### å·²å®ç°åŠŸèƒ½
- âœ… FastAPIåç«¯æœåŠ¡
- âœ… RAGå¢å¼ºçš„è®°å¿†ç³»ç»Ÿ
- âœ… å·¥å…·è°ƒç”¨ç³»ç»Ÿ
- âœ… ACP Connect 2.0äº’è”
- âœ… Gradio WebUI

### å¾…å®ç°åŠŸèƒ½
- ğŸ”² **Reactå‰ç«¯** (Day 23-36)
- ğŸ”² æ›´å®Œå–„çš„æµ‹è¯•
- ğŸ”² å®¹å™¨åŒ–éƒ¨ç½²
- ğŸ”² æ–‡æ¡£å®Œå–„

### æŠ€æœ¯äº®ç‚¹
- é«˜æ€§èƒ½å¼‚æ­¥æ¶æ„
- é•¿æœŸè®°å¿†æŒä¹…åŒ–
- å±€åŸŸç½‘Agentå‘ç°
- ç¾¤ç»„å®æ—¶é€šè®¯
- å·¥å…·æ’ä»¶æ‰©å±•

---

## ACP 2.0 åè®®è®¾è®¡

### æ¶ˆæ¯æ ¼å¼
```json
{
  "type": "message|control|event",
  "version": "1.0",
  "from": "agent_id",
  "to": "target_id",
  "group_id": "group_id (å¯é€‰)",
  "timestamp": "ISO8601",
  "payload": {
    // æ¶ˆæ¯å†…å®¹
  }
}
```

### æ§åˆ¶æ¶ˆæ¯ç±»å‹
- `HELLO` - é¦–æ¬¡è¿æ¥
- `PING` - å¿ƒè·³
- `PONG` - å¿ƒè·³å“åº”
- `DISCONNECT` - æ–­å¼€è¿æ¥
- `SYNC_REQUEST` - åŒæ­¥è¯·æ±‚
- `SYNC_RESPONSE` - åŒæ­¥å“åº”

### æ¶ˆæ¯ç±»å‹
- `CHAT` - èŠå¤©æ¶ˆæ¯
- `MEMORY_REQUEST` - è®°å¿†è¯·æ±‚
- `MEMORY_RESPONSE` - è®°å¿†å“åº”
- `TOOL_CALL` - å·¥å…·è°ƒç”¨
- `TOOL_RESULT` - å·¥å…·ç»“æœ
- `BROADCAST` - å¹¿æ’­æ¶ˆæ¯
- `GROUP_MESSAGE` - ç¾¤ç»„æ¶ˆæ¯

### ç¾¤ç»„æ“ä½œ
- `CREATE_GROUP` - åˆ›å»ºç¾¤ç»„
- `JOIN_GROUP` - åŠ å…¥ç¾¤ç»„
- `LEAVE_GROUP` - é€€å‡ºç¾¤ç»„
- `INVITE` - é‚€è¯·æˆå‘˜
- `KICK` - è¸¢å‡ºæˆå‘˜
- `GROUP_SYNC` - ç¾¤ç»„åŒæ­¥